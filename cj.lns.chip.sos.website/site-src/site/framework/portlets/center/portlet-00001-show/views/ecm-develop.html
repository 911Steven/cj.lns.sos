<html>
<head>
<meta charset="UTF-8">
<title>äº‘è¿ç½‘</title>
<link href="../../../../css/global.css" type="text/css" rel="stylesheet">
<link href="../../../../css/pages/portal-viewer.css" type="text/css"
	rel="stylesheet">
<script type="text/javascript"
	src="../../../../js/jquery/jquery-2.1.4.js"></script>
<style type="text/css">
#content_inner>.body>pre>img {
	width: 100%;
}

.grid-s5m0e5 {
	height: 20200px;
}
pre xmp{
	font-size: 10px;
	white-space: pre-wrap;
    word-wrap: break-word;
}
</style>
</head>
<body>
	<div class="topbar">
		<ul class="left">
			<li class="about"><span label>å…³äº</span></li>
		</ul>
		<ul class="right">
			<li class="mine"><a target="_blank"
				href="../../../../public/register2.html">æ³¨å†Œ</a></li>
			<li class="login"><span label>ç™»å½•</span></li>
		</ul>
	</div>
	<div class="banner">
		<div class="b-left"></div>
		<div class="b-center">
			<div class="logo">
				<img src="../../../../img/pages/logo.png">
				<p>äº‘ç½‘</p>
			</div>
		</div>
		<div class="b-right"></div>
	</div>
	<div class="grid-s5m0e5">
		<div class="col-main">
			<div class="main-wrap">
				<div id="content">
					<div id="content_inner">
						<div class="title">
							<p>ecmå¼€å‘æ‰‹å†Œ</p>
						</div>
						<div class="subtitle">
							<ul>
								<li><span label>ä½œè€…ï¼š</span><span value
									style="padding-right: 10px;">cj (èµµå‘å½¬)</span><span label>å‘å¸ƒæ—¥æœŸï¼š</span><span
									value>2016å¹´8æœˆ24æ—¥ 15:24</span></li>
							</ul>
						</div>
						<div class="body">
							<div style="font-family: sans-serif; margin-bottom: 10px;">
								<span><b>å…³é”®è¯ï¼š</b></span>é¢å‘è¿æ¥ç¼–ç¨‹ é¢å‘æ¨¡å—ç¼–ç¨‹ é¢å‘åè®®ç¼–ç¨‹ ç¼–ç¨‹æ€æƒ³ ç»“æ„åŒ– é¢å‘å¯¹è±¡ <br>
								java j2ee spring dotnet osgi netty tomcat jetty nodejs jsp php
								aspx zookeeper docker
							</div>
							<div style="font-family: sans-serif; margin-bottom: 10px;">
								<span><b>æ‘˜è¦ï¼š</b></span>ecmçš„å¼€å‘ï¼ŒåŒ…æ‹¬ä¾‹ç¨‹ï¼Œå­¦ä¹ 
							</div>
							<div style="font-family: sans-serif; margin-bottom: 10px;">
								<span><b>æ­£æ–‡ï¼š</b></span>
							</div>
							<pre>
æœ¬æ‰‹å†Œä¾‹ç¨‹è¯·åœ¨å¼€å‘å¹³å°â€œè§†çª—ç©ºé—´â€æ‰¾ç¤ºä¾‹å·¥ç¨‹8æœˆ24æ—¥å‘å¸ƒçš„ç‰ˆæœ¬ä¸‹è½½
åœ¨å·¥ç¨‹ä¸­çš„ç¤ºä¾‹é¡¹ç›®ï¼š
å…¥å£ï¼š
your.crop.examples.mainé¡¹ç›®ä¸­çš„TestEcmIOCç±»
your.crop.examples.chip1 èŠ¯ç‰‡1 
your.crop.examples.chip2 èŠ¯ç‰‡2
1.ç¨‹åºé›†çš„ç”¨æ³•
è£…è½½ã€è¿è¡Œã€åœæ­¢ã€å¸è½½ï¼Œå¦‚ä¸‹ï¼š
<xmp>
TestEcmIOC.java
public static void main(String... strings) {
		String cf1 = "/Users/carocean/studio/examples/build/your.crop.examples.chip1/your.crop.examples.chip1-1.0.jar";
		String cf2 = "/Users/carocean/studio/examples/build/your.crop.examples.chip2/your.crop.examples.chip2-1.0.jar";
		Assembly a1 = Assembly.loadAssembly(cf1);//è£…è½½ä¸€ä¸ªç¨‹åºé›†
		Assembly a2 = Assembly.loadAssembly(cf2);
		a2.dependency(a1);//ç”±äºa2ç¨‹åºé›†ä¸­çš„deptmentä¾ç±»äºa1ç¨‹åºé›†çš„IDeptmemtæ¥å£ï¼Œæ•…è€Œa2.è¦ä¾èµ–äºa1
		a2.start();//å¯åŠ¨a2ï¼ˆä¾èµ–æ—¶a1è‡ªå¯ï¼‰
		Object obj = a2.workbin().part("chip2main");//é€šè¿‡é›¶ä»¶ç®±è·å–ç¨‹åºé›†a2ä¸­çš„å¼€æ”¾æœåŠ¡
		IAdaptable a = (IAdaptable) obj;//å¼€æ”¾æœåŠ¡å‡æ˜¯é€‚é…å™¨ç±»å‹ï¼Œå®ƒå¯ä»¥è½¬æ¢ä»»æ„ç±»å‹
		IActuator act = a.getAdapter(IActuator.class);//ä½¿ç”¨æ‰§è¡Œå™¨æ‰§è¡Œå¼±ç±»å‹è°ƒç”¨æ–¹å¼
		act.exeCommand("testMyXmlService");
		act.exeCommand("testMyAnnoService");
		act.exeCommand("refMethodInXmlService");
		act.exeCommand("refXmlServiceByGridge");
		act.exeCommand("testMyJsonService");
		
		List<Class<?>> mys=a2.workbin().exotericalType("my");//é€šè¿‡å¤–éƒ¨ç±»å‹åˆ†ç±»æœç´¢å¤–éƒ¨çš„ç±»å‹
		for(Class<?> c:mys){
			ServiceCollection<?> col=a2.workbin().part(c);//æ ¹æ®ç±»å‹æŸ¥æ‰¾å¤–éƒ¨æœåŠ¡
			System.out.println("-----è¿™æ˜¯æŒ‰å¤–éƒ¨æŒ‡å®šåˆ†ç±»æœåˆ°çš„æœåŠ¡æ•°ï¼š"+col.size());
		}
		a1.unload();//ğŸ‘Ÿè½½
		a2.unload();
	}
</xmp>
2.ç¨‹åºé›†çš„ä¸Šä¸‹æ–‡è¯´æ˜
ç¨‹åºé›†çš„ä¸Šä¸‹æ–‡æ˜¯jsonæ–‡ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿è¯´æ˜ç›´æ¥åœ¨ä¸Šé¢å†™äº†
<xmp>
{
	entryPoint : {//è¿™æ˜¯å…¥å£ç‚¹ï¼Œä¾¦å¬ç¨‹åºé›†å¯åŠ¨å’Œåœæ­¢äº‹ä»¶
		activators : [{//å£°æ˜ä¸€ä¸ªæ´»åŠ¨å™¨ï¼Œæ´»åŠ¨å™¨æœ‰ä¸¤ç§å£°æ˜æ–¹å¼ï¼Œä¸€ç§æ˜¯åœ¨æ­¤æŒ‡å®šæ´»åŠ¨å™¨ç±»ï¼Œä¸€ç§æ˜¯å°†æ´»åŠ¨å™¨å£°æ˜ä¸ºcjæœåŠ¡ï¼Œä½†è¿™ç§æ–¹å¼æ— ä¼ å‚
				name : 'æµ‹è¯•æ´»åŠ¨å™¨',
				class : 'your.crop.examples.chip1.Chip1Activator',
				parameters:{name:'forTest'}
			}]
	},
	assemblyInfo : {//ç¨‹åºé›†çš„å®šä¹‰èŠ¯ç‰‡
		assemblyTitle : "chip2",//ç¨‹åºé›†åï¼Œæ¯”è¾ƒé‡è¦
		assemblyResource:"/",//ç¨‹åºé›†èµ„æºï¼Œåœ¨ä½¿ç”¨webåº”ç”¨æ—¶æœ‰å®ƒçš„è§„èŒƒ
		assemblyDescription : "é©¿ç«™é‚»å±…èŠ¯ç‰‡",
		assemblyConfiguration : "",//é…ç½®çš„ä¸€äº›è¯´æ˜ï¼Œä¸é‡è¦
		assemblyCompany : "",//å…¬å¸
		assemblyProduct : "cj.lns.chip2",//ä¸€èˆ¬æƒ…å†µæŒ‡å®šä¸‹äº§å“ä¹Ÿå¯ä»¥
		assemblyCopyright : "Copyright   2011",//æˆæƒ
		assemblyTrademark : "",//è¿™ä¸ªæˆ‘ä¹Ÿä¸ç€æ˜¯å•¥ï¼Œæƒ³ç”¨å°±ç”¨
		assemblyCulture : "",//æœ¬åœ°åŒ–è¯´æ˜ï¼Œç©ºç€ä¹Ÿè¡Œ
		guid : "A87112A0-7D71-48C5-9584-689FC5E1B783",//å¿…é¡»æŒ‡å®šï¼Œä¸€èˆ¬æ˜¯guidï¼Œä½†ä¹Ÿå¯æŒ‡å®šåç§°ï¼Œåœ¨æ ‘äºæ’ä»¶ä½“ç³»ä¸­ï¼Œè¦æ±‚å”¯ä¸€æ€§
		assemblyVersion : "1.0.0.0",
		assemblyFileVersion : "1.0.0.0"
	},
	global:{
		default:"zh_CN",//ç¨‹åºé›†çš„å›½é™…åŒ–ï¼Œåœ¨ç¨‹åºé›†çš„å±æ€§ç›®å½•ä¸­ä¼šæ ¹æ®å®ƒæŸ¥æ‰¾ç›¸åº”çš„è¯­è¨€åŒ…ï¼Œç”±äºecmåœ¨ä¸‰å¹´å‰å°±å¼€å‘å®Œæ¯•äº†ï¼Œéš”äº†è¿™ä¹ˆä¹…ï¼Œæˆ‘ä¸çœ‹ä»£ç ä¹Ÿä¸çŸ¥é“å’‹ç”¨ï¼Œä¹‹åå†è¡¥å……å§
		desc:"å¦‚æœç³»ç»Ÿç¯å¢ƒè¦æ±‚å„èŠ¯ç‰‡é‡‡ç”¨çš„è¯­è¨€æœ¬èŠ¯ç‰‡æ²¡æœ‰ï¼Œåˆ™èŠ¯ç‰‡å¯é‡‡ç”¨é»˜è®¤è¯­è¨€"
		},
	serviceContainer : {
		name : "netContainer",//å®¹å™¨åï¼Œå¿…é¡»
		switchFilter:"off",//ç”¨äºåœ¨jssä¸­æ‹¦æˆªjavaæœåŠ¡ï¼Œç”±äºè¦åŒ¹é…æœåŠ¡è¯·æ±‚idï¼Œå› æ­¤æŸè€—æ€§èƒ½ï¼Œswitchfilter=onä¸ºå¯ç”¨ï¼Œswitchfilter=offä¸ºå…³é—­
		jss:[{//å£°æ˜ä¸€ä¸ªjssæ¨¡å—
			module:"test",//æ¨¡å—åå¾ˆé‡è¦ï¼Œå®ƒæ˜¯ç´¢å¼•jssæœåŠ¡çš„å…³é”®ï¼Œå¦‚ï¼š$.cj.jss.test.xxxJssService
			package:"your.crop.examples.chip2.jss",//jssæœåŠ¡æ‰€åœ¨ä½ç½®ï¼Œ
			runtimeHome:"",//jss é…ç½®ä¸­çš„runtimeHomeå±æ€§ï¼šå®ƒç”¨äºæŒ‡å®šjssè¿è¡Œæ—¶çš„æ ¹ç›®å½•ï¼Œä¸æŒ‡å®šåˆ™é‡‡ç”¨ç³»ç»Ÿé»˜è®¤ï¼Œåœ¨ï¼š/work/modulenameä¸‹
			unzip:"true",//æ˜¯å¦å°†jssæœåŠ¡ä»ç¨‹åºé›†åŒ…ä¸­è§£å‹ï¼Œè¦é…åˆsearchModeä½¿ç”¨
			searchMode:"link",//jss.searchMode=link,inner,both,åˆ†åˆ«ä»£è¡¨èµ„æºï¼šé“¾æ¥å¤–éƒ¨èµ„æºã€jarå†…ã€ä¸¤è€…éƒ½æ˜¯ï¼Œé»˜è®¤æ˜¯äºŒè€…éƒ½æ˜¯ï¼Œå½“äºŒè€…éƒ½æ˜¯æ—¶ï¼Œä¼šå…ˆæ‰¾å¤–éƒ¨ï¼Œå†æ‰¾åŒ…å†…ï¼Œå¦‚æœå‡ºç°é‡åï¼Œåˆ™åŒ…å¤–æœ‰æ•ˆåŒ…å†…æ— æ•ˆã€‚
			extName:".jss.js"//æŒ‡å®šjssæœåŠ¡æ–‡ä»¶çš„æ‰©å±•åï¼Œä¸€èˆ¬å»ºè®®.jss.js
		}],
		scans : [{//å®šä¹‰äº†ä¸€ä¸ªcjæœåŠ¡javaæœåŠ¡çš„æ‰«æè·¯å¾„
					package : "your.crop.examples.chip2",
					extName : ".class|.json|.xml",
					exoterical:"true"//æ˜¯å¦å¼€æ”¾æ­¤åŒ…ï¼Œæ­¤åŒ…å†…çš„æœåŠ¡åŠç±»å‹å¯¹ç¨‹åºé›†å¤–å¯è§ï¼Œè§å£°æ˜å¤–éƒ¨ç±»å‹å’Œå¤–éƒ¨æœåŠ¡çš„ä¸‰ç§æ–¹å¼
				}]

	}
}
</xmp>
3.cjæœåŠ¡çš„å¼€å‘
	cjæœåŠ¡æ˜¯å¯¹ecmæœåŠ¡çš„æ€»ç§°ï¼Œæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯javaæœåŠ¡ï¼Œä¸€ç§æ˜¯jssæœåŠ¡
	ï¼  javaæœåŠ¡åŠŸèƒ½ï¼šå±æ€§æ³¨å…¥ã€æ–¹æ³•æ³¨å…¥ã€æ–¹é¢æ³¨å…¥
	ï¼ javaæœåŠ¡çš„å£°æ˜æ–¹å¼ï¼šjavaæ³¨è§£å£°æ˜æ³•ã€jsonå£°æ˜æ³•ã€xmlæ³¨å£°æ˜æ³•ã€ä»¥ä¸Šå‡ ç§çš„æ··åˆå£°æ˜æ³•
	ï¼ jssæœåŠ¡çš„å£°æ˜
3.1 å¤–éƒ¨ç±»å‹
	å³åœ¨ç¨‹åºé›†å¤–å¯è§çš„ç±»å‹ï¼Œå¦‚æœå…¶å®ƒç¨‹åºé›†éœ€è¦æ‰©å±•è¯¥ç¨‹åºé›†çš„æ­¤ç±»å‹ï¼Œå°±éœ€è¦å¼€æ”¾ç±»å‹ï¼Œå¼€æ”¾ç±»å‹æœ‰ä¸‰ç§æ–¹å¼ï¼š
	1.åœ¨assembly.jsonä¸­å°†åŒ…å£°æ˜ä¸ºå¼€æ”¾
	2.ä½¿ç”¨package-info.javaå°†åŒ…å£°æ˜ä¸ºå¼€æ”¾ï¼Œå¦‚ä¸‹ï¼š
<xmp>
your.crop.examples.chip1/src/your/crop/examples/chip1/external/IDeptmemt.java
//å®šä¹‰å¯¼å‡ºåŒ…ï¼Œè¯¥åŒ…è·¯å¾„ä¸‹çš„publicç±»å‹å¯è¢«ä¾èµ–å®ƒçš„ç¨‹åºé›†è®¿é—®
/*
 * å¼€æ”¾ç±»å‹çš„ä¸‰ç§æ–¹æ³•ï¼š
 * 1.åœ¨Assembly.jsonä¸­å£°æ˜å¼€æ”¾çš„åŒ…
 * 2.é€šè¿‡package-info.javaæ–‡ä»¶å£°æ˜å¼€æ”¾çš„åŒ…
 * 3.æŒ‡å®šæŸä¸ªç±»å‹å¼€æ”¾ï¼Œå³åœ¨ç±»åå‰åŠ @CjExotericalType,å½“ç„¶ä½¿ç”¨xml,jsonæ¥æ³¨è§£æ˜¯ä¸€æ ·çš„
 */
@CjExotericalType
package your.crop.examples.chip1.external;
import cj.studio.ecm.annotation.CjExotericalType;
</xmp>
	3.@CjExotericalTypeæ³¨è§£æ–¹å¼å°†ä¸€ä¸ªç±»å‹å£°æ˜ä¸ºå¼€æ”¾
3.2 javaæœåŠ¡
	æœåŠ¡å£°æ˜ã€å±æ€§ã€æ–¹æ³•ä¸‰ä¸ªéƒ¨åˆ†
	3.2.1 æœåŠ¡å£°æ˜ï¼š
	æ ‡è¯†ï¼šæœåŠ¡çš„å”¯ä¸€æ ‡è¯†ï¼Œåœ¨xmlä¸ºidï¼Œåœ¨annotationä¸ºnameï¼Œåœ¨jsonä¸­serviceId
	åŒºé—´ï¼šå³ï¼šscopeæœ‰ï¼šsingleonï¼Œmultitonï¼Œruntimeä¸‰ç§åŒºé—´,å…¶ä¸­è¿è¡Œæ—¶æœåŠ¡å¯¹äºjavaå®ç°çš„æœåŠ¡æ¥è¯´æ˜¯åœ¨è¿è¡Œæ—¶æ”¾å…¥å®¹å™¨çš„æœåŠ¡ï¼Œå¦‚æœç›´æ¥å£°æ˜ä¸ºruntimeçš„ï¼Œä¸å¤šä¾‹ä¸€æ ·ï¼Œå¯¹äºjssæœåŠ¡ï¼Œè¿è¡Œæ—¶æ˜¯æŒ‡è¯·æ±‚ä¸€æ¬¡è£…è½½ä¸€æ¬¡æœåŠ¡çš„jss.jsæ–‡ä»¶ï¼Œå³ä¿®æ”¹éšæ—¶æœ‰æ•ˆ
	ç±»è·¯å¾„ï¼šclass="" //æŒ‡æ˜å½“å‰æœåŠ¡çš„ç±»è·¯å¾„ï¼Œå¦‚æœä¸æŒ‡å°†åœ¨åŒçº§ç›®å½•ä¸‹æŒ‰åŒåï¼ˆä¸åŒ…æ‹¬æ‰©å±•åï¼‰æ¥æœç±»
	æ„é€ ï¼šconstructor="newXmlService"//åœ¨æœåŠ¡æ–°å»ºæ—¶æŒ‡å®šæ„é€ å‡½æ•°
	æ˜¯å¦å¤–éƒ¨æœåŠ¡ï¼šisExoteric=trueï¼Œé»˜è®¤ä¸ºfalseï¼Œå³è¯¥æœåŠ¡åœ¨ç¨‹åºé›†å¤–éƒ¨æ˜¯å¦å¯è§ã€‚
	æ¡¥ï¼šæ¡¥ç”¨äºæœåŠ¡æ–¹æ³•çš„æ‹¦æˆªï¼Œæ˜¯æ—¥å¿—ã€äº‹åŠ¡ç­‰å¿…ç”¨çš„åŠŸèƒ½ã€‚å£°æ˜å¦‚ä¸‹ï¼š
	1.annotationæ–¹å¼ï¼š
<xmp>
your.crop.examples.chip2/src/your/crop/examples/chip2/anno/MyAnnoService.java
	@CjBridge(aspects = "myAspect1+$.cj.jss.test.JssMyAspect")//æ–¹é¢å¯ä»¥åŠ å‡ï¼Œå³å¯æ˜¯javaæœåŠ¡å£°æ˜çš„æ–¹é¢ä¹Ÿå¯æ˜¯jssæœåŠ¡å£°æ˜çš„æ–¹é¢
	@CjService(name = "myAnnoService", constructor = "newMyAnnotation")
	public class MyAnnoService implements IServiceAfter, IAnnoService {
</xmp>
	2.xmlæ–¹å¼ï¼š
	<xmp>
your.crop.examples.chip2/src/your/crop/examples/chip2/xml/MyXmlService.xml
	isValidé»˜è®¤æ˜¯æœ‰æ•ˆ
	<bridge aspects="myAspect1+myAspect3+myAspect2-myAspect3" isValid="true">
	</bridge>
</xmp>
	3.jsonæ–¹å¼ï¼š
	<xmp>
your.crop.examples.chip2/src/your/crop/examples/chip2/json/MyJsonBridge.json
	"bridge":{
        "aspects":"myAspect1",
        "isValid":"true"
    },
	</xmp>
	3.2.2 å±æ€§å£°æ˜ï¼š
	å±æ€§çš„æ³¨å…¥ç›®çš„æœ‰ï¼Œä¸€æ˜¯æ³¨å…¥å€¼ï¼Œä¸€æ˜¯æ³¨å…¥æœåŠ¡ï¼Œä¸€æ˜¯åå‘æ³¨å…¥ï¼Œä¸€æ˜¯æ³¨å…¥æœåŠ¡ç«™ç‚¹
	1.å¼•ç”¨æ–¹å¼ï¼šé€šè¿‡æœåŠ¡æ ‡è¯†å¼•ç”¨ã€é€šè¿‡æœåŠ¡ç±»å‹å¼•ç”¨ã€é€šè¿‡è°ƒç”¨æœåŠ¡æ–¹æ³•å¼•ç”¨
	ä»¥ä¸‹è¯·å‚è§ç¤ºä¾‹å·¥ç¨‹é¡¹ç›®ï¼šyour.crop.examples.chip2
	ï¼Š annotationæ–¹å¼ï¼š
<xmp>
@CjServiceRef(refByName = "myAnnoService", useBridge = UseBridgeMode.forbidden)
refByName:é€šè¿‡æœåŠ¡æ ‡è¯†ï¼Œå¯¹äºjssçš„æ ‡è¯†æ˜¯ï¼š$.cj.jss.æ¨¡å—å.jssæœåŠ¡æ–‡ä»¶ç›¸å¯¹äºjssæ¨¡å—æ ¹çš„ä½ç½®
refByType:é€šè¿‡æœç´¢æœåŠ¡ç±»å‹å¼•ç”¨ã€‚å¦‚ï¼š
	@CjServiceRef(refByType = AnnoObject.class)
	ServiceCollection<AnnoObject> objs;
	
	@CjServiceRef(refByType = AnnoObject.class)
	AnnoObject obj;
refByMethodï¼šé€šè¿‡è°ƒç”¨æ–¹æ³•çš„è¿”å›ç»“æœï¼Œå¦‚ä¸‹ï¼Œè¡¨ç¤ºè°ƒç”¨æœåŠ¡myXmlServiceçš„æ–¹æ³•newXmlServiceï¼š
	@CjServiceRef(refByName = "myXmlService", refByMethod = "newXmlService")
	IXmlService myXmlService;
useBridgeï¼šé€šè¿‡æ¡¥æ¥å¼•ç”¨ï¼Œæ¡¥æ¥æ˜¯é¢å‘æ–¹é¢ç¼–ç¨‹çš„å®ç°ï¼Œå½“é€šè¿‡æœ¬å±æ€§æ‰§è¡Œæ¡¥æœåŠ¡æ—¶ï¼Œå°†ç»è¿‡æ–¹é¢çš„é“¾å¼è°ƒç”¨
@CjJoinpoint(aspects="myAspect3")//åœ¨è°ƒç”¨æœåŠ¡myAnnoServiceæ—¶åˆæŒ‡å®šäº†ç§æœ‰æ–¹é¢myAspect3ï¼Œç§æœ‰æ–¹é¢åªå¯¹æœ¬å±æ€§çš„è°ƒç”¨æœ‰æ•ˆï¼Œä¸ä¼šå½±å“æ¡¥æœåŠ¡çš„æ–¹é¢é…ç½®
	@CjServiceRef(refByName = "myAnnoService",useBridge=UseBridgeMode.auto)
	static IAnnoService the2;
</xmp>
	ï¼Š xmlæ–¹å¼ï¼š
<xmp>
	<property name="name">
		<value>fuck you</value>
	</property>
	<property name="annoService">
		<ref byName='xxxService'></ref>
	</property>
	<property name="map">
		<!--å€¼æè¿°å™¨ï¼šå¯ä»¥ä¸ºå±æ€§æ³¨å…¥JAVAåŸºæœ¬å€¼ï¼Œä¹Ÿå¯ä»¥æ³¨å…¥map,listç­‰æ•°æ®-->
		<!--
		ç³»ç»Ÿå›ºå®šçš„å€¼æ³¨å…¥å™¨æœ‰ï¼š
		cj.basic:JavaåŸºæœ¬å€¼æ³¨å…¥
		cj.propfileï¼šå°†Assembly.propertiesæ–‡ä»¶ä¸­çš„å±æ€§æ³¨å…¥
		cj.jsonList:å°†jsonæ ¼å¼çš„æ•°ç»„æ³¨å…¥ï¼Œè¦æ³¨å…¥çš„å±æ€§å¿…é¡»æ˜¯é›†åˆç±»å‹,åœ¨å…¶å…ƒç´ ä¸­å¦‚æœè¦å¼•ç”¨æœåŠ¡ï¼Œè¯·ä½¿ç”¨$.å·ï¼‹æœåŠ¡åæ¥å¼•ç”¨æœåŠ¡
		cj.jsonMapï¼šè¦æ³¨å…¥çš„å±æ€§å¿…é¡»æ˜¯mapç±»å‹,è¿™äº›ä¸ºç³»ç»Ÿæä¾›çš„é»˜è®¤æ ¼å¼åŒ–å™¨ï¼Œåœ¨å…¶å…ƒç´ ä¸­å¦‚æœè¦å¼•ç”¨æœåŠ¡ï¼Œè¯·ä½¿ç”¨$.å·ï¼‹æœåŠ¡åæ¥å¼•ç”¨æœåŠ¡
		ä¹Ÿå¯è‡ªå®šä¹‰ï¼šä»ValueParseræ´¾ç”Ÿï¼Œå¹¶å£°æ˜ä¸ºcjæœåŠ¡ï¼Œåˆ™æœåŠ¡åå³ä¸ºparserå
		-->
		<value parser="cj.jsonMap">{"age1":"333","myObject":"$.myAnnoService"}</value>
	</property>
</xmp>
	<property name="site">
		<!-- æ³¨å…¥serviceSite -->
		<serviceSite></serviceSite>
	</property>
	ï¼Š jsonæ–¹å¼ï¼š
	<xmp>
{
			"name": "deptment",
			"refByName": "deptment"
		},
		{
			"name": "byBridge",
			"refByName": "myJsonBridge",
			"refByBridge": {
				"useBridge": "auto",
				"joinpoint": {
					"aspects": "+myAspect3"
				}
			},
			"invertInjection":"true"
		},
		{
			"name":"list",
			"parser":"cj.jsonList",
			"value":["333","$.myAnnoService"]
		},
		{
			"name":"map",
			"parser":"cj.jsonMap",
			"value":{"age1":"333","myObject":"$.myAnnoService"}
		},
		{
			"name":"iocByMyValueParser",
			"parser":"my.objectParser",
			"value":"new your.crop.examples.chip2.xml.ShowCreateObjectByValueParser();"
		},
		{
			"name":"site",
			"serviceSite":"true"
		},{
			"name":"byMethod2",
			"refByMethod":"newService2"
		},{
			"name":"byMethod1",
			"refByMethod":"newService"
		}
</xmp>
	2.å€¼æ³¨å…¥ï¼š
	ä½¿ç”¨parser
	json:
	{
			"name":"map",
			"parser":"cj.jsonMap",
			"value":{"age1":"333","myObject":"$.myAnnoService"}
		}
	xml:
	<property name="name">
		<!--
		å¦‚æœé‡‡ç”¨valueå…ƒç´ ï¼Œåˆ™åœ¨propertyä¸‹é…çš„å…¶å®ƒå…ƒç´ å°†å¤±æ•ˆ
		cj.basic:JavaåŸºæœ¬å€¼æ³¨å…¥
		-->
		<value parser="cj.basic">fuck you</value>
	</property>
	annotation:
	@CjPropertyValue(parser = "cj.jsonList", value = "['333','$.annoObject']")
	private List<Object> List;
	3.æœåŠ¡ç«™ç‚¹æ³¨å…¥ï¼š
<xmp>
annotation:
	@CjServiceSite
	IServiceSite site;
xml:
	<property name="site">
		<!-- æ³¨å…¥serviceSite -->
		<serviceSite></serviceSite>
	</property>
json:
		{
			"name":"site",
			"serviceSite":"true"
		}	
</xmp>
	4.åå‘æ³¨å…¥ï¼š
	å°†å½“å‰æœåŠ¡æ³¨å…¥åˆ°myJsonBridgeä¸­ï¼Œåœ¨myJsonBridgeä¸­å¿…é¡»å®ç°IServiceSetteræ¥å£
	{
			"name": "byBridge",
			"refByName": "myJsonBridge"
			"invertInjection":"true"
		}
	xml:
<property name="invertInjectionAnnoService" >
		<ref  byName="invertInjectionAnnoService"></ref>
		<invertInjection isForce="true"></invertInjection>
	</property>
@CjServiceInvertInjection()
	@CjServiceRef(refByType = AnnoObject.class)
	AnnoObject obj;
	annotation:

	2.1.3 æœåŠ¡æ–¹æ³•å£°æ˜ï¼š
	æœåŠ¡æ–¹æ³•éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚é™æ€å·¥å‚ï¼Œæ ¹æ®æ³¨å…¥å‚æ•°ç”Ÿæˆå¯¹è±¡ä¸ºå±æ€§å¼•ç”¨ï¼Œæ„é€ ä¸æ™®é€šæ–¹æ³•å£°æ˜ä¸€æ ·ã€‚
	æ–¹æ³•åˆ«åï¼šå³åœ¨æœåŠ¡å®¹å™¨ä¸­çš„ç´¢å¼•åï¼Œç´¢å¼•è§„åˆ™æ˜¯å“ªä¸ªæœåŠ¡çš„å“ªä¸ªæ–¹æ³•
	è¿”å›ç±»å‹ï¼šè¯´æ˜æœåŠ¡çš„ç±»å‹è¦æŒ‰å“ªä¸ªç±»å‹æ¥æ³¨å…¥æœåŠ¡ï¼Œé»˜è®¤ä¸ºå½“å‰è¿”å›ç±»å‹æ¥æ³¨è§£ï¼Œå¦‚æœåå›ç±»å‹æŒ‡å®šçš„ä¸åŒ¹é…ï¼Œåˆ™ä¸æ³¨å…¥å®ƒã€‚
	ç»‘å®šçš„æ–¹æ³•åï¼šä¸€ç­é»˜è®¤æ˜¯ä¿®é¥°çš„æ–¹æ³•åï¼Œå¯¹äºæ„é€ å¯ä»¥æ˜¾å¼æŒ‡å®šä¸ºï¼š<init>
	æ–¹æ³•å‚æ•°ï¼šå‚æ•°å³å¯æ³¨å…¥å€¼ä¹Ÿå¯æ³¨å…¥æœåŠ¡

ä»¥ä¸‹æ˜¯ç¤ºä¾‹ï¼š
annotation:
<xmp>
@CjMethod(alias = "newMyAnnotationMMM")
	public MyAnnoService(@CjMethodArg(value = "44") int mmm) {
		this.mmm = mmm;
	}

	@CjMethod(alias = "newMyAnnotation")
	public MyAnnoService(@CjMethodArg(value = "è¿™æ˜¯æ„é€ æ³¨å…¥çš„TTTTçš„å€¼") String tttt) {
		contrustText = tttt;
		System.out.println("è¿™æ˜¯æ„é€ è¾“å‡ºï¼š" + tttt);
	}

	@CjMethod(alias = "factory")
	public static MyAnnoService get() {
		return the;
	}

	@CjMethod(alias = "createMyService", returnDefinitionId = "annoObject")
	public AnnoObject createMyService(@CjMethodArg(value = "ddfddfas") String text,
			@CjMethodArg(ref = "annoObject") Object service) {
		System.out.println("è¿™æ˜¯æ–¹æ³•å‚æ•°æ³¨å…¥çš„å¯¹è±¡ï¼š" + service);
		System.out.println("è¿™æ˜¯æ–¹æ³•å‚æ•°æ³¨å…¥çš„å€¼ï¼š" + text);
		AnnoObject o = new AnnoObject();
		return o;
	}

	@CjMethod(alias = "createStaticMyService", returnDefinitionType = ".")
	public static AnnoObject createStaticMyService(@CjMethodArg(value="tttt")String text) {
		AnnoObject o = new AnnoObject();
		return o;
	}
</xmp>

xml:
<xmp>
<!-- å£°æ˜ä¸€ä¸ªæ–¹æ³•ç»‘å®šåˆ°æ„é€ å‡½æ•°ï¼Œå£°æ˜çš„æœ¬æœåŠ¡çš„æ„é€ é»˜è®¤æ‰§è¡Œæ­¤æ–¹æ³• -->
	<!-- å¦‚æœbindå±æ€§æ²¡æœ‰æˆ–bind=""åˆ™è§†ä¸ºæ„é€ å‡½æ•°æˆ–æŒ‡å®šbindä¸º<init>ï¼Œå½“ç„¶åœ¨xmlä¸­å¾—è½¬ä¹‰ï¼Œå¯ä»¥è¾“å…¥&lt;init&gt;å³ï¼š<init> ï¼Œä¸”è¿”å›èŠ‚ç‚¹å¤±æ•ˆ	-->
	<!-- å¦‚æœæ–¹æ³•æœ‰å‚æ•°åˆ™argTypesä¸èƒ½çœï¼Œè¦å‡†ç¡®åŒ¹é…ï¼Œå¦åˆ™æ‰¾ä¸åˆ°æ–¹æ³•ã€‚æ²¡æœ‰å‚æ•°åˆ™å¯çœå» -->
	<method  alias="newXmlService"  bind=""  argTypes="int">
		<arg value="333" ></arg><!-- value,ref -->
	</method>
	<method  alias="newService2"  bind="newService" argTypes="java.lang.String,java.lang.String,your.crop.examples.chip2.json.MyJsonService"    >
		<arg value="433aa4" ></arg><!-- value,ref -->
		<arg value="test232" ></arg>
		<arg ref="myJsonService"></arg>
		<!-- result å¦‚æœæ²¡æœ‰å±æ€§ï¼Œåˆ™æŒ‰è¿”å›çš„å®ä¾‹çš„ç±»å‹æœç´¢æœåŠ¡å®šä¹‰æ³¨å…¥ã€‚ å¦‚æœæœ‰æœåŠ¡å®šä¹‰IDï¼Œåˆ™å°†è¿”å›å¯¹è±¡ä½œä¸ºè¯¥å®šä¹‰çš„å®ä¾‹æ³¨å…¥.
		å¦‚æœä¸ºç©ºï¼Œåˆ™å°è¯•ä»¥æ–¹æ³•è¿”å›ç±»å‹åœ¨æœåŠ¡å®šä¹‰ä¸­æœç´¢ã€‚äºŒè€…é€‰ä¸€æˆ–éƒ½æŒ‡å®šæˆ–ä¸ºç©ºéƒ½è¡Œ ï¼Œå¦‚æœæœåŠ¡ä¸å­˜åœ¨æˆ–éè¿”å›ç±»å‹åˆ™æ–¹æ³•ä»è¢«æ‰§è¡Œï¼Œä½†è¿”å›çš„å®ä¾‹ä¸ä¼šè¢«æ³¨å…¥
		å»ºè®®æŒ‡æ˜è¿”å›çš„æœåŠ¡å®šä¹‰idï¼Œå¦‚æœä¸æŒ‡å®šå°†ä»¥è¿”å›ç±»å‹åœ¨å®¹å™¨ä¸­æŸ¥æ‰¾ï¼ŒæŸè€—æ€§èƒ½ã€‚
		-->
		<result byDefinitionId=""  byDefinitionType=""></result>
	</method>
	<!-- æ¼”ç¤ºé‡è½½æ–¹æ³•å’Œç©ºå‚æ•°æ–¹æ³• -->
	<method  alias="newService3"  bind="newService"  >
	</method>
</xmp>

json:
<xmp>
{
    		"alias":"newJsonService",
    		"bind":"<init>",
    		"argTypes":"int,your.crop.examples.chip2.json.IMyJsonBridge",
    		"args":[
                {
                    "value":"6666"
               	},
                {
                	"ref":"myJsonBridge"
               	}
           	]
    	},{
    		"alias":"newService",
    		"bind":"newService",
    		"argTypes":"",
    		"args":[
           	],
           	"result":{
           		"byDefinitionId":"",
           		"byDefinitionType":""
           	}
    	},{
    		"alias":"newService2",
    		"bind":"newService",
    		"argTypes":"java.lang.String",
    		"args":[
    			{"value":"kiviv"}
           	],
           	"result":{
           		"byDefinitionId":"myJsonBridge",
           		"byDefinitionType":""
           	}
    	},{
    		"alias":"newService",
    		"bind":"newService",
    		"argTypes":"",
    		"result":{
           		"byDefinitionId":"",
           		"byDefinitionType":""
           	},
    		"args":[
           	]
    	}
</xmp>
	2.1.4 æ¡¥æœåŠ¡å£°æ˜ï¼š
xml:
<xmp>
<bridge aspects="myAspect1+myAspect3+myAspect2-myAspect3" isValid="true">
	</bridge>
</xmp>
json:
<xmp>
"description": "æœ¬æœåŠ¡ç”¨äºXXXï¼Œä½œè€…",
	"serviceId": "myJsonService",
	"class": "",
	"scope": "singleon",
	"constructor":"newJsonService",
	"bridge": {
		"aspects": "",
		"isValid": "false"
	},
</xmp>
annotation:
<xmp>
@CjBridge(aspects = "myAspect1+$.cj.jss.test.JssMyAspect")
@CjService(name = "myAnnoService", constructor = "newMyAnnotation")
public class MyAnnoService{
</xmp>
3.2æ··åˆæœåŠ¡å£°æ˜ï¼š
	æ”¯æŒå¯¹ä¸€ä¸ªjavaæœåŠ¡åŒæ—¶é‡‡ç”¨æ³¨è§£æ³•ã€jsonæ³•ã€xmlæ³•æ¥å£°æ˜ï¼Œå¦‚æœå­˜åœ¨å†²çªï¼Œæ³¨è§£æ³•ä¼˜å…ˆçº§æœ€ä½ï¼Œè€Œxmlä¼˜å…ˆçº§æœ€é«˜
è§ç¤ºä¾‹å·¥ç¨‹ï¼šyour.crop.examples.chip2/src/your/crop/examples/chip2/mixuture/MixutureService.java

3.2 jssæœåŠ¡
jssæœåŠ¡ç±»ä¼¼äºnodejsç»“æ„ï¼Œå®ƒå’ŒjavaæœåŠ¡å¯ä»¥äº¤äº’ä½¿ç”¨ï¼Œä¹Ÿæ˜¯å¼€å‘webçš„åˆ©å™¨ä¹‹ä¸€ï¼ˆåœ¨æœåŠ¡å™¨ç«¯å¯ä»¥åƒjqueryè¯­æ³•é‚£æ ·è§£ædomï¼Œéç¼–è¯‘ï¼Œå³æ”¹å³ç”¨ï¼Œå¤šçº¿ç¨‹ã€æ”¯æŒäº‹åŠ¡ï¼Œæ¨¡å—åŒ–ï¼‰

jssæœåŠ¡å¤´ï¼š
æœåŠ¡å¤´æ˜¯ecmå¼€å‘jssçš„è§„èŒƒï¼Œå…¶ä¸­å¤´çš„jsså¯¹è±¡ä¸èƒ½çœç•¥ï¼Œå®ƒæ˜¯å¤´çš„å®šä¹‰ï¼›å¤´è¿˜æ”¯æŒå£°æ˜ä»»æ„å¯¹è±¡ï¼Œå£°æ˜çš„å¯¹è±¡å¯ä»¥åœ¨æœ¬jssä¸­é€šè¿‡headå˜é‡æ¥è·å–ï¼Œç›®çš„æ˜¯åƒc++,javaè¯­æ³•é‚£æ ·ä½¿ä»£ç æ•´æ´å¥½çœ‹ï¼Œæ˜“è¯»ã€‚
jsså¯¹åƒå¤´åŒ…æ‹¬äº†ï¼šæœåŠ¡åŒºé—´å£°æ˜ï¼šsingleon,multiton,runtime,å•ä¾‹æ¨¡å¼åœ¨ç¨‹åºé›†å¯åŠ¨æ—¶è£…è½½ï¼Œå…¨å±€å”¯ä¸€å®ä¾‹ï¼›å¤šä¾‹ä¹Ÿæ˜¯åœ¨å¯åŠ¨æ—¶è£…è½½ï¼Œåªæ˜¯æ¯æ¬¡è¯·æ±‚ä»å†…å­˜çš„jså¯¹è±¡ä¸­å¤åˆ¶ä¸€ä»½å®ä¾‹ï¼›runtimeåœ¨å¯åŠ¨æ—¶ä¸è£…è½½ï¼Œæ¯æ¬¡è¯·æ±‚æ—¶ä¾¿è£…è½½ä¸€æ¬¡ã€‚
extendsï¼šæ˜¯æœ¬jssè¦å®ç°çš„æ¥å£ï¼Œå®ƒåœ¨javaä¸­å¯æŒ‰æ¥å£æ¥è°ƒç”¨jss,å¦‚æœisStronglyJss:trueåˆ™è¡¨æ˜è¯¥jssæœåŠ¡ä¸€å®šåå›æ¥å£ç±»å‹ï¼Œè€ŒéScriptObjectMirrorå¯¹è±¡ã€‚
filterä½¿ç”¨å®ƒéœ€è¦åœ¨assembly.jsonä¸­å¼€å¯è¿‡æ»¤å™¨æ¨¡å¼switchFilter:"on"ï¼Œå®ƒç”¨äºæ‹¦æˆªjavaæœåŠ¡çš„æ–¹æ³•ï¼Œå³æ­¤æœºåˆ¶å®ç°äº†ä»¥jssä»£ç†javaçš„åŠŸèƒ½

/*
 * 
 * ä½œè€…ï¼šcj
 * è¯´æ˜ï¼š
 * filterä½¿ç”¨å®ƒéœ€è¦åœ¨assembly.jsonä¸­å¼€å¯è¿‡æ»¤å™¨æ¨¡å¼switchFilter:"on"ï¼Œå®ƒç”¨äºæ‹¦æˆªjavaæœåŠ¡çš„æ–¹æ³•ï¼Œå³æ­¤æœºåˆ¶å®ç°äº†ä»¥jssä»£ç†javaçš„åŠŸèƒ½
 * ç”±äºfilteræ‹¦æˆªæœåŠ¡è¯·æ±‚é“¾è·¯ï¼Œå› æ­¤å½±å“æ€§èƒ½ï¼Œä¸€èˆ¬æƒ…å†µä¸å»ºè®®ä½¿ç”¨æœåŠ¡è¿‡æ»¤æœºåˆ¶.switchFilter:"off"
 * <![jss:{
		scope:'runtime',
		extends:'your.crop.examples.chip2.jss.IJssPage',
		isStronglyJss:true,
		filter:{
			invalid:'false',
			pattern:'myAnnoService',
			interrupter:'doFilter'
	 	}
 	},
 	shit:{
 		name:"fuck"
 	}
 ]>
 <![desc:{
	ttt:'2323',
	obj:{
		name:'09skdkdk'
		}
* }]>
*/

jssæ­£æ–‡ï¼š


exportsè¡¨ç¤ºè¯¥jsså¯¹è±¡ï¼Œå› æ­¤éœ€è¦å¼€æ”¾ç»™å¤–éƒ¨çš„å‡½æ•°å¿…é¡»æŒ‡å®šä¸ºå…¶æˆå‘˜
importsè¡¨ç¤ºå¯¼å…¥çš„ç¯å¢ƒå±æ€§ï¼ŒåƒèŠ¯ç‰‡çš„ä¿¡æ¯ï¼Œjssæ¨¡å—çš„ä¿¡æ¯ï¼Œjsså¤´
<xmp>
print('---------------');
print('module_name:' + imports.module_name);
print('module_home:' + imports.module_home);
print('module_ext:' + imports.module_extName);
print('module_pack:' + imports.module_package);
print('module_unzip:' + imports.module_unzip);
print('module_type:' + imports.module_type);
print('head jss scope:'+imports.head.jss.scope);
print('head shit name:'+imports.head.shit.name);
print('location:' + imports.locaction);
print('source:' + imports.source);
print('selectKey1:' + imports.selectKey1);
print('selectKey2:' + imports.selectKey2);
print('this is jss chip site ' + chip.site());
var info = chip.info();
print(info.id);
print(info.name);
print(info.version);
print(info.getProperty('home.dir'));
print('-----------------end.')
</xmp>

è§„èŒƒï¼Œåœ¨å¼€å§‹å¤„å†™å¯¼å…¥åŒ…ï¼š
<xmp>
/*
 * 
 * ä½œè€…ï¼š
 * è¯´æ˜ï¼š
 * isStronglyJss:false æŒ‡æˆå¼±æ¥å£ï¼Œåˆ™æ­¤jssæœåŠ¡å³å¯æŒ‰æ¥å£è°ƒç”¨ä¹Ÿå¯æŒ‰æ— æ¥å£è°ƒç”¨ï¼Œæœ¬æ–‡æ¼”ç¤ºæ— æ¥å£çš„ï¼Œå¯ä»¥å°†extendsè®¾ç©ºæˆ–ä¸è¦
 * <![jss:{
		scope:'runtime',
		extends:'your.crop.examples.chip2.jss.ITestJss',
		isStronglyJss:false
 	},
 	shit:{
 		name:"fuck"
 	}
 ]>
 <![desc:{
	ttt:'2323',
	obj:{
		name:'09skdkdk'
		}
* }]>
*/

var String = Java.type('java.lang.String');

exports.doit=function(text){
	print('--selectKey1:' + imports.selectKey1);
	print('--selectKey2:' + imports.selectKey2);
	print('hello world jss '+text);
	test(text);
}
function test(text){
	var site=chip.site();
	//jssæœåŠ¡äº’è°ƒ
	var printer=site.getService('$.cj.jss.test.JssPrinter');
	printer.printHello('0000000'+text);
}
</xmp>
3.3jssæœåŠ¡æ–¹é¢çš„å®ç°ï¼š
å¼€å‘ä¸€ä¸ªjssæ–¹é¢ï¼š
<xmp>
/*
 * 
 * ä½œè€…ï¼šcj
 * è¯´æ˜ï¼š
 * ä½¿ç”¨jssæ–¹é¢æ¥æ‹¦javaæœåŠ¡çš„æ¡¥
 * 
 * <![jss:{
		scope:'runtime',
		extends:'cj.studio.ecm.bridge.IAspect',
		isStronglyJss:true
 	}
 ]>
*/

var String = Java.type('java.lang.String');

exports.cut=function(bridge, args,point){
	print('*****è¿™æ˜¯jssæ–¹é¢:'+String.format("ï¼ï¼ï¼æ–¹é¢æ‹¦æˆªæ‰§è¡Œæ–¹æ³•ï¼š%s.%s%s",point.getServiceDefId(),point.getMethodName(),point.getMethodDesc()));
	return point.cut(bridge, args);
}
exports.getCutInterfaces=function(){
	return null;
}
</xmp>

åœ¨javaæœåŠ¡ä¸­ä½¿ç”¨ï¼š
@CjBridge(aspects = "myAspect1+$.cj.jss.test.JssMyAspect")
@CjService(name = "myAnnoService", constructor = "newMyAnnotation")
public class MyAnnoService{	
</init>
</Object>
							</pre>
						</div>
						<div class="bottom"></div>
					</div>
				</div>
				<div id="side">
					<div class="fill"></div>
					<div class="portlet">
						<div class="title">
							<span label>ç›¸å…³</span>
						</div>
						<ul class="items">
			<li><a href="../views/cloud.html" plugin target="_blank">è§‚ç‚¹ï¼šäº‘è®¡ç®—çš„é£æ½®å¿…ç„¶å¯¼è‡´äº‘è®¡ç®—æœºç³»ç»Ÿçš„äº§ç”Ÿ</a></li>
			<li><a href="../views/rensheng.html" plugin target="_blank">äººç”Ÿï¼šå…³äºæ…ˆå–„ æ–°æ—¶ä»£ä¸­æ…ˆå–„æ„ä¹‰ä¹‹æˆ‘è§</a></li>
			<li><a href="../views/jishu.html" plugin target="_blank">æŠ€æœ¯ï¼šæ·±å…¥åˆ†æDockeré•œåƒåŸç†</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="col-sub"></div>
		<div class="col-extra"></div>
	</div>
</body>
</html>